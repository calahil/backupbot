services:
  backupbot:
    build: .
    container_name: backupbot
    privileged: true
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Etc/UTC
      - SETTINGS_ENCRYPTION_KEY=${KEY}
      - CLI_ARGS= #optional
      - DUPLICATI__WEBSERVICE_PASSWORD=${PASSWORD}
    volumes:
      # Config dir for duplicati
      - /srv/appdata/duplicati/config:/config
      # Backup folder to store dumps/backups
      - /srv/backups:/backups:rshared
      # Docker socket to list containers
      - /var/run/docker.sock:/var/run/docker.sock:ro

    ports:
      - 8200:8200
      - 8201:8080
    restart: unless-stopped
